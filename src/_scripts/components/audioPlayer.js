define(["jquery"],function(y){y.fn.locucao=function(){var t=y("#locucaoPlayer"),e=y(this).find("[data-locucao]").data("locucao");y(this).on("initTela",function(){t.locucaoPlayer("stopSound"),e?y("#locucaoPlayer").locucaoPlayer("playSound",e):y("#locucaoPlayer").locucaoPlayer("hidePlayer")}),y(this).on("fimTela",function(){t.locucaoPlayer("stopSound")})},y.locucaoPlayer=function(t,e){var o,n={locucao_ligada:!1},i=this,a=0;i.settings={},i.audio="";var c=$this=y(t),t=t,l=y("#content");i.init=function(){i.settings=y.extend({},n,e)},i.playSound=function(t){i.audio=t,c.removeClass("inativo"),l.removeClass("noFooter"),o=new Audio(i.audio),(t=o).addEventListener("timeupdate",r),t.addEventListener("durationchange",r),t.addEventListener("loadstart",d),t.addEventListener("load",d),t.addEventListener("loadend",d),t.addEventListener("progress",d),t.addEventListener("error",d),t.addEventListener("abort",d),o.currentTime=a,v.oninput(),i.settings.locucao_ligada&&o.play()},i.stopSound=function(){o&&(a=0,o.pause(),o.currentTime=0)},i.hidePlayer=function(){c.addClass("inativo"),l.addClass("noFooter")},i.setVolume=function(t){o&&(o.volume=t/100)},i.setSpeed=function(t){o&&(o.playbackRate=t)};function r(t){var e=this.currentTime/this.duration;c.find(".barra-progresso").width(100*e+"%"),c.find(".progresso-locucao").html(`${this.currentTime.toString().toHHMMSS()} / ${this.duration.toString().toHHMMSS()} `)}function u(t){i.setVolume(t)}function s(t){t=(50+t/100*100)/100;i.setSpeed(t)}function d(t){t.type,t.loaded}$this.find(".item-locucao-ouvir-texto").on("change",function(){var t;t=y(this)[0].checked,i.settings.locucao_ligada=t,i.settings.locucao_ligada&&i.audio?(i.playSound(i.audio),c.addClass("playing")):(i.stopSound(),c.removeClass("playing"))}),$this.find(".progresso-locucao-bt-mais").on("click",function(){o.currentTime=o.currentTime+15,a=o.currentTime}),$this.find(".progresso-locucao-bt-menos").on("click",function(){o.currentTime=o.currentTime-15,a=o.currentTime});var f=50,v=document.getElementById("velocidadeRange");v.oninput=function(){s(this.value)},$this.find(".slider-velocidade .bt-transp-slider-left").on("click",function(){f-=10,v.value=f,s(v.value)}),$this.find(".slider-velocidade .bt-transp-slider-right").on("click",function(){f+=10,v.value=f,s(v.value)});var h=100,p=document.getElementById("volumeRange");p.oninput=function(){u(this.value)},$this.find(".slider-volume .bt-transp-slider-left").on("click",function(){h-=10,p.value=h,u(p.value)}),$this.find(".slider-volume .bt-transp-slider-right").on("click",function(){h+=10,p.value=h,u(p.value)}),i.init()},y.fn.locucaoPlayer=function(e,o){var n=arguments;return this.each(function(){var t;null==y(this).data("locucaoPlayer")?("object"==typeof e&&(o=e),t=new y.locucaoPlayer(this,o),y(this).data("locucaoPlayer",t)):(t=y(this).data("locucaoPlayer"))[e].apply(this,Array.prototype.slice.call(n,1))})},String.prototype.toHHMMSS=function(){var t=parseInt(this,10),e=Math.floor(t/3600),o=Math.floor((t-3600*e)/60),t=t-3600*e-60*o;return e<10&&0,(o=o<10?"0"+o:o)+":"+(t=t<10?"0"+t:t)}});